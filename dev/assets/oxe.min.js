/*
	Name: oxe
	Version: 3.20.1
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elis@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at https://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _awaitIgnored(e,t){if(!t)return Promise.resolve(e).then(_empty)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _invoke(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function _invokeIgnored(e){var t=e();if(t&&t.then)return t.then(_empty)}function _empty(){}function _await(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}var _async=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(t){return Promise.reject(t)}}}}catch(t){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(t){return Promise.reject(t)}}}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";function e(e){return{write:function(){e.element.disabled=!1}}}function t(e){return{write:function(){e.element.disabled=!0}}}function n(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),t===e.element.disabled)return!1},write:function(){e.element.disabled=t}}}function r(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),!t===e.element.disabled)return!1},write:function(){e.element.disabled=!t}}}function a(e){e.target.hasAttribute("o-value")&&Promise.resolve().then(function(){return p(e.target,"value")}).catch(console.error)}function l(e){"checkbox"!==e.target.type&&"radio"!==e.target.type&&"option"!==e.target.type&&"SELECT"!==e.target.nodeName&&e.target.hasAttribute("o-value")&&Promise.resolve().then(function(){return p(e.target,"value")}).catch(console.error)}function i(e){if(!(0!==e.button||e.defaultPrevented||"INPUT"===e.target.nodeName||"BUTTON"===e.target.nodeName||"SELECT"===e.target.nodeName||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var t=e.path?e.path[0]:e.target,n=t.parentNode;if(L.contain){for(;n&&"O-ROUTER"!==n.nodeName;)n=n.parentNode;if("O-ROUTER"!==n.nodeName)return}for(;t&&"A"!==t.nodeName;)t=t.parentNode;!t||"A"!==t.nodeName||t.hasAttribute("download")||t.hasAttribute("external")||t.hasAttribute("o-external")||0===t.href.indexOf("tel:")||0===t.href.indexOf("ftp:")||0===t.href.indexOf("file:")||0===t.href.indexOf("mailto:")||0!==t.href.indexOf(window.location.origin)||L.external&&("RegExp"===L.external.constructor.name&&L.external.test(t.href)||"Function"===L.external.constructor.name&&L.external(t.href)||"String"===L.external.constructor.name&&L.external===t.href)||(e.preventDefault(),L.location.href!==t.href&&Promise.resolve().then(function(){return L.route(t.href)}).catch(console.error))}}function o(e){var t=e&&e.state?e.state.path:window.location.href;Promise.resolve().then(function(){return L.route(t,{replace:!0})}).catch(console.error)}function s(t){var e=t.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var n=A.resolve(e.src||e.href),r=$.data[n];$.ready(r)}}var d=_async(function(e){var t=e.target,n=x.elements.get(t).get("submit"),r=O.get(n.scope);g.formReset(t,r)}),c=_async(function(e){var t,n=e.target,r=x.elements.get(n).get("submit"),t=v.get(r.keys),a=O.get(r.scope),l=g.formData(n,a);return _await(t.call(r.container,l,e),function(e){return _invoke(function(){if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var r=n.getAttribute("o-action");t=n.getAttribute("o-method");var a=n.getAttribute("o-enctype");return e.url=e.url||r,e.method=e.method||t,e.contentType=e.contentType||a,_await(w.fetch(e),function(t){return _invokeIgnored(function(){if(e.handler)return _awaitIgnored(e.handler(t))})})}},function(){(n.hasAttribute("o-reset")||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.reset)&&n.reset()})})}),p=_async(function(e,t){if(!e)throw new Error("Oxe - requires element argument");if(!t)throw new Error("Oxe - requires attribute argument");var n=x.elements.get(e).get(t);h.batch({read:function(){var e=n.element.type,t=n.element.nodeName,r=void 0;if("SELECT"===t){var a=n.element.options,o=n.element.multiple,s=!1;r=o?[]:"";for(var d,c=0,i=a.length;c<i;c++)if(d=a[c],d.selected)if(s=!0,o)r.push(d.value);else{r=d.value;break}!a.length||o||s||(r=a[0].value)}else if("radio"===e)for(var l,p="input[type=\"radio\"][o-value=\""+n.value+"\"]",u=n.container.querySelectorAll(p),m=0,h=u.length;m<h;m++)l=u[m],n.element===l&&(r=m);else if("file"===e){var y=n.element.files;r=r||[];for(var g,f=0,v=y.length;f<v;f++)g=y[f],r.push(g)}else r="checkbox"===e?n.element.checked:n.element.value;if(void 0!==r){var b=O.get(n.keys);if(r&&"object"===("undefined"==typeof r?"undefined":_typeof(r))&&r.constructor===b.constructor){for(var k in r)if(r[k]!==b[k]){O.set(n.keys,r);break}}else b!==r&&O.set(n.keys,r)}}})}),u={splice:function(){var e=this,t=arguments[0],n=arguments[1],r=2<arguments.length?arguments.length-2:0;if("number"!=typeof t||"number"!=typeof n)return[];0>t?(t=e.length+t,t=0<t?t:0):t=t<e.length?t:e.length,0>n?n=0:n>e.length-t&&(n=e.length-t);var a=e.$meta.length,l=void 0,i=void 0,o=void 0,s=void 0,d=2,c=arguments.length-d,p=e.slice(t,n);s=a-1-t;var m=[];if(0<s)for(i=t;s--;)l=i++,o=c&&d<c?arguments[d++]:e.$meta[i],e.$meta[l]=u.create(o,e.$meta.listener,e.$meta.path+l),m.push(e.$meta.listener.bind(null,e.$meta[l],e.$meta.path+l,l));if(0<r)for(m.push(e.$meta.listener.bind(null,e.length+r,e.$meta.path.slice(0,-1),"length"));r--;)l=e.length,e.$meta[l]=u.create(arguments[d++],e.$meta.listener,e.$meta.path+l),u.defineProperty(e,l),m.push(e.$meta.listener.bind(null,e.$meta[l],e.$meta.path+l,l));if(0<n)for(m.push(e.$meta.listener.bind(null,e.length-n,e.$meta.path.slice(0,-1),"length"));n--;)e.$meta.length--,e.length--,l=e.length,m.push(e.$meta.listener.bind(null,void 0,e.$meta.path+l,l));return m.reduce(function(e,t){return e.then(t)},Promise.resolve()).catch(console.error),p},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,n=arguments.length;t<n;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,n=arguments.length;t<n;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,n){if(n!==this[t]){var r=e.create(n,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=r,e.defineProperty(this,t),this.$meta.listener(r,this.$meta.path+t,t),r}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var n=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),n}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(n){n!==this.$meta[e]&&(this.$meta[e]=t.create(n,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,n){var r=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;n=n?n+".":"";var a=void 0,l=void 0,i=e.constructor,o=e.constructor(),s=e.constructor();if(s.$meta={value:e.constructor()},s.$meta.value.path=n,s.$meta.value.listener=t,i===Array){for(a=0,l=e.length;a<l;a++)s.$meta.value[a]=r.create(e[a],t,n+a),s[a]=r.property(a);var d=r.arrayProperties();for(a in d)s[a]=d[a]}if(i===Object)for(a in e)s.$meta.value[a]=r.create(e[a],t,n+a),s[a]=r.property(a);var c=r.objectProperties();for(a in c)s[a]=c[a];return Object.defineProperties(o,s)}},m=function(){function e(){_classCallCheck(this,e),this.reads=[],this.writes=[],this.time=1e3/30,this.pending=!1}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.time=e.time||this.time}},{key:"tick",value:function(e){return window.requestAnimationFrame(e)}},{key:"schedule",value:function(){this.pending||(this.pending=!0,this.tick(this.flush.bind(this,null)))}},{key:"flush",value:function(e){e=e||performance.now();for(var t;t=this.reads.shift();)if(t(),performance.now()-e>this.time)return void this.tick(this.flush.bind(this,null));for(;t=this.writes.shift();)if(t(),performance.now()-e>this.time)return void this.tick(this.flush.bind(this,null));this.reads.length||this.writes.length?performance.now()-e>this.time?this.tick(this.flush.bind(this,null)):this.flush(e):this.pending=!1}},{key:"remove",value:function(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}},{key:"batch",value:function(e){var t=this;if(e.read){var n=function(){var n=void 0,r=void 0;n=e.context?e.read.call(e.context):e.read(),e.write&&!1!==n&&(r=e.context?e.write.bind(e.context):e.write,t.writes.push(r),t.schedule())};t.reads.push(n),t.schedule()}else if(e.write){var r;r=e.context?e.write.bind(e.context,e.shared):e.write,t.writes.push(r),t.schedule()}return e}}]),e}(),h=new m,y={class:function(e){return{write:function(){var t=e.names.slice(1).join("-");e.element.classList.remove(t)}}},css:function(e){return{write:function(){e.element.style.cssText=""}}},default:function(e){var t;t=e.type in this?this[e.type](e):{read:function(){if(""===e.element[e.type])return!1},write:function(){e.element[e.type]=""}},h.batch(t)},disable:e,disabled:e,each:function(e){return{write:function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)}}},enable:t,enabled:t,hide:function(e){return{write:function(){e.element.hidden=!1}}},html:function(e){return{write:function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)}}},on:function(e){return{write:function(){e.element.removeEventListener(e.names[1],e.cache,!1)}}},read:function(e){return{write:function(){e.element.readOnly=!1}}},required:function(e){return{write:function(){e.element.required=!1}}},show:function(e){return{write:function(){e.element.hidden=!0}}},text:function(e){return{write:function(){e.element.innerText=""}}},value:function(e){return{write:function(){var t,n,r,a,l;if("SELECT"===e.element.nodeName)for(l=e.element.options,t=0,n=l.length;t<n;t++)a=l[t],a.selected=!1;else if("radio"===e.element.type)for(r="input[type=\"radio\"][o-value=\""+e.path+"\"]",l=e.element.parentNode.querySelectorAll(r),(t=0,n=l.length);t<n;t++)a=l[t],a.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""}}},write:function(e){return{write:function(){e.element.readOnly=!0}}}},g={PREFIX:/data-o-|o-/,ROOT:/^(https?:)?\/?\//,DOT:/\.+/,PIPE:/\s?\|\s?/,PIPES:/\s?,\s?|\s+/,VARIABLE_START:"(\\|*\\,*\\s*)",VARIABLE_END:"([^a-zA-z]|$)",binderNames:function(e){return e=e.split(this.PREFIX)[1],e?e.split("-"):[]},binderValues:function(e){return e=e.split(this.PIPE)[0],e?e.split("."):[]},binderPipes:function(e){return e=e.split(this.PIPE)[1],e?e.split(this.PIPES):[]},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var n=!0,r=!1,a=void 0;try{for(var l,i,o=e.attributes[Symbol.iterator]();!(n=(l=o.next()).done);n=!0)i=l.value,t.setAttribute(i.name,i.value)}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return t},formData:function(e,t){for(var n,r=e.querySelectorAll("[o-value]"),a={},o=0,i=r.length;o<i;o++)if(n=r[o],"OPTION"!==n.nodeName){var l=n.getAttribute("o-value");if(l){var s=this.binderValues(l);a[s[s.length-1]]=this.getByPath(t,s)}}return a},formReset:function(e,t){for(var n,r=e.querySelectorAll("[o-value]"),a=0,i=r.length;a<i;a++)if(n=r[a],"OPTION"!==n.nodeName){var l=n.getAttribute("o-value");if(l){var o=this.binderValues(l);this.setByPath(t,o,"")}}},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,n,r){var a=this,o=new RegExp(this.VARIABLE_START+t+this.VARIABLE_END,"g");a.walker(e,function(e){if(3===e.nodeType)(e.nodeValue==="$"+t||"$index"===e.nodeValue)&&(e.nodeValue=r);else if(1===e.nodeType)for(var a,s=0,i=e.attributes.length;s<i;s++)a=e.attributes[s],(0===a.name.indexOf("o-")||0===a.name.indexOf("data-o-"))&&(a.value=a.value.replace(o,"$1"+n+"."+r+"$2"))})},traverse:function(e,t,n){for(var r,a="string"==typeof t?t.split("."):t,l=a.length-1,o=0;o<l;o++){if(r=a[o],!(r in e))if("function"==typeof n)n(e,r,o,a);else return;e=e[r]}return{data:e,key:a[l]}},setByPath:function(e,t,n){for(var r,a="string"==typeof t?t.split("."):t,l=a.length-1,o=0;o<l;o++)r=a[o],r in e||(isNaN(a[o+1])?e[r]={}:e[r]=[]),e=e[r];return e[a[l]]=n},getByPath:function(e,t){for(var n,r="string"==typeof t?t.split("."):t,a=r.length-1,l=0;l<a;l++){if(n=r[l],!(n in e))return;e=e[n]}return e[r[a]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==document.readyState&&"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",function t(){e(),document.removeEventListener("DOMContentLoaded",t)},!0):e())}},f=function(){function e(){_classCallCheck(this,e),this.data={}}return _createClass(e,[{key:"get",value:function(e){return g.getByPath(this.data,e)}},{key:"set",value:function(e,t){return g.setByPath(this.data,e,t)}}]),e}(),v=new f,b={class:function(e){var t,n;return{write:function(){t=O.get(e.keys),t=x.piper(e,t),n=e.names.slice(1).join("-"),e.element.classList.toggle(n,t)}}},css:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t===e.element.style.cssText)return!1},write:function(){e.element.style.cssText=t}}},default:function(e){var t;if(e.type in this)t=this[e.type](e);else{var n;t={read:function(){return(n=O.get(e.keys),n=x.piper(e,n),void 0===n||null===n)?(O.set(e.keys,""),!1):("object"===("undefined"==typeof n?"undefined":_typeof(n))?n=JSON.stringify(n):"string"!=typeof n&&(n=n.toString()),n!==e.element[e.type]&&void 0)},write:function(){e.element[e.type]=n}}}t&&h.batch(t)},disable:n,disabled:n,each:function(e){if(e.cache||e.element.children.length){e.fragment||(e.fragment=document.createDocumentFragment()),e.cache||(e.cache=e.element.removeChild(e.element.firstElementChild));var t,n,r,a=this;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return!1;var l=e.fragment.children.length+e.element.children.length;if(l===t.length)return!1;if(l>t.length)r=!0,l--;else if(l<t.length){var i=document.importNode(e.cache,!0);if(g.replaceEachVariable(i,e.names[1],e.path,l),x.bind(i,e.container,e.scope),e.fragment.appendChild(i),l++,l===t.length&&(n=!0),"SELECT"===e.element.nodeName&&e.element.attributes["o-value"]){var o=e.element.attributes["o-value"].name,s=e.element.attributes["o-value"].value,d=x.create({name:o,value:s,scope:e.scope,element:e.element,container:e.container});a.default(d)}}return l<t.length?(a.default(e),!1):void 0},write:function(){r?e.element.removeChild(e.element.lastElementChild):n&&e.element.appendChild(e.fragment)}}}},enable:r,enabled:r,hide:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),t===e.element.hidden)return!1},write:function(){e.element.hidden=t}}},html:function(e){var t;return{read:function(){return(t=O.get(e.keys),t=x.piper(e,t),void 0===t||null===t)?(O.set(e.keys,""),!1):("object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):"string"!=typeof t&&(t+=""),t!==e.element.innerHTML&&void 0)},write:function(){e.element.innerHTML=t}}},on:function(t){var n;return{write:function(){return n=v.get(t.keys),"function"==typeof n?void(!t.cache&&(t.cache=function(r){for(var e,a=[r],o=0,i=t.pipes.length;o<i;o++){e=t.pipes[o].split("."),e.unshift(t.scope);var l=O.get(e);a.push(l)}Promise.resolve().then(n.bind(t.container).apply(null,a)).catch(console.error)}),t.element.removeEventListener(t.names[1],t.cache),t.element.addEventListener(t.names[1],t.cache)):(console.warn("Oxe - attribute o-on=\""+t.keys.join(".")+"\" invalid type function required"),!1)}}},read:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),t===e.element.readOnly)return!1},write:function(){e.element.readOnly=t}}},required:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),t===e.element.required)return!1},write:function(){e.element.required=t}}},show:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),!t===e.element.hidden)return!1},write:function(){e.element.hidden=!t}}},text:function(e){var t;return{read:function(){return(t=O.get(e.keys),t=x.piper(e,t),void 0===t||null===t)?(O.set(e.keys,""),!1):("object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):"string"!=typeof t&&(t=t.toString()),t!==e.element.innerText&&void 0)},write:function(){e.element.innerText=t}}},value:function(e){var t=this,n=e.element.type,r=e.element.nodeName,a=void 0,l=void 0;if("SELECT"===r){var o;return{read:function(){if(a=O.get(e.keys),a=x.piper(e,a),o=e.element.options,l=e.element.multiple,l&&a.constructor!==Array)throw new Error("Oxe - invalid multiple select value type "+e.keys.join(".")+" array required")},write:function(){for(var t,n=0,r=!1,s=0,i=o.length;s<i;s++)t=o[s],t.value===a?(r=!0,t.setAttribute("selected","")):t.hasAttribute("selected")?(n=s,t.removeAttribute("selected")):t.removeAttribute("selected");o.length&&!r&&(o[n].setAttribute("selected",""),a!==(o[n].value||"")&&O.set(e.keys,o[n].value||""))}}}if("radio"===n){var s;return{read:function(){return a=O.get(e.keys),void 0===a?(O.set(e.keys,0),!1):void(s=e.container.querySelectorAll("input[type=\"radio\"][o-value=\""+e.value+"\"]"))},write:function(){for(var t,n=!1,r=0,i=s.length;r<i;r++)t=s[r],r===a?(n=!0,t.checked=!0):t.checked=!1;n||(s[0].checked=!0,O.set(e.keys,0))}}}return"file"===n?{read:function(){return a=O.get(e.keys),void 0===a?(O.set(e.keys,[]),!1):a&&a.constructor===Array?void 0:(console.warn("Oxe - file attribute invalid type"),!1)},write:function(){for(var t=0,n=a.length;t<n;t++)a[t]!==e.element.files[t]&&(a[t]?e.element.files[t]=a[t]:console.warn("Oxe - file remove not implemented"))}}:"checkbox"===n?{read:function(){return a=O.get(e.keys),"boolean"==typeof a?a!==e.element.checked&&void 0:(O.set(e.keys,!1),!1)},write:function(){e.element.checked=a}}:{read:function(){if("OPTION"===r&&e.element.selected){var n=e.element.parentElement,l=x.elements.get(n).get("value");t.default(l)}return a=O.get(e.keys),void 0===a||null===a?(O.set(e.keys,""),!1):a!==e.element.value&&void 0},write:function(){e.element.value=a}}},write:function(e){var t;return{read:function(){if(t=O.get(e.keys),t=x.piper(e,t),!t===e.element.readOnly)return!1},write:function(){e.element.readOnly=!t}}}},k=function(){function e(){_classCallCheck(this,e),this.data={},this.elements=new Map}return _createClass(e,[{key:"create",value:function(e){var t={};if(void 0===e.name)throw new Error("Oxe.binder.create - missing name");if(void 0===e.value)throw new Error("Oxe.binder.create - missing value");if(void 0===e.scope)throw new Error("Oxe.binder.create - missing scope");if(void 0===e.element)throw new Error("Oxe.binder.create - missing element");if(void 0===e.container)throw new Error("Oxe.binder.create - missing container");return t.name=e.name,t.value=e.value,t.scope=e.scope,t.element=e.element,t.container=e.container,t.names=e.names||g.binderNames(e.name),t.pipes=e.pipes||g.binderPipes(e.value),t.values=e.values||g.binderValues(e.value),t.context={},t.path=t.values.join("."),t.type=t.type||t.names[0],t.keys=[t.scope].concat(t.values),t}},{key:"get",value:function(e){var t;if("string"==typeof e?(t={},t.scope=e.split(".").slice(0,1).join("."),t.path=e.split(".").slice(1).join(".")):t=e,!(t.scope in this.data))return null;if(!(t.path in this.data[t.scope]))return null;for(var n,r=this.data[t.scope][t.path],a=0,i=r.length;a<i;a++)if(n=r[a],n.element===t.element&&n.name===t.name)return n;return null}},{key:"add",value:function(e){if(this.elements.has(e.element)||this.elements.set(e.element,new Map),!this.elements.get(e.element).has(e.names[0]))this.elements.get(e.element).set(e.names[0],e);else return!1;e.scope in this.data||(this.data[e.scope]={}),e.path in this.data[e.scope]||(this.data[e.scope][e.path]=[]),this.data[e.scope][e.path].push(e)}},{key:"remove",value:function(e){if((this.elements.has(e.element)&&(this.elements.get(e.element).has(e.names[0])&&this.elements.get(e.element).remove(e.names[0]),0===this.elements.get(e.elements).length&&this.elements.remove(e.elements)),!!(e.scope in this.data))&&e.path in this.data[e.scope])for(var t=this.data[e.scope][e.path],n=0,r=t.length;n<r;n++)if(t[n].element===e.element)return t.splice(n,1)}},{key:"each",value:function(e,n){var r="string"==typeof e?e.split("."):e,a=r[0],l=this.data[a];if(l){var i=r.slice(1).join(".");for(var o in l)if(""===i||0===o.indexOf(i)&&(o===i||"."===o.charAt(i.length)))for(var s=l[o],d=0,c=s.length;d<c;d++)n(s[d])}}},{key:"piper",value:function(e,t){if(!e.pipes.length)return t;var n=v.get(e.scope);if(!n)return t;for(var r,a=0,i=e.pipes.length;a<i;a++)if(r=e.pipes[a],r in n)t=n[r].call(e.container,t);else throw new Error("Oxe - pipe method "+r+" not found in scope "+e.scope);return t}},{key:"skipChildren",value:function(e){if("#document-fragment"===e.nodeName)return!1;if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!0;for(var t,n=0,r=e.attributes.length;n<r;n++)if(t=e.attributes[n],0===t.name.indexOf("o-each"))return!0;return!1}},{key:"eachElement",value:function(e,t){if("SLOT"!==e.nodeName&&"O-ROUTER"!==e.nodeName&&"TEMPLATE"!==e.nodeName&&"#document-fragment"!==e.nodeName&&t.call(this,e),!this.skipChildren(e))for(e=e.firstElementChild;e;)this.eachElement(e,t),e=e.nextElementSibling}},{key:"eachAttribute",value:function(e,t){for(var n,r=e.attributes,a=0,i=r.length;a<i;a++)n=r[a],0===n.name.indexOf("o-")&&"o-scope"!==n.name&&"o-reset"!==n.name&&"o-action"!==n.name&&"o-method"!==n.name&&"o-enctype"!==n.name&&t.call(this,n)}},{key:"unbind",value:function(e,t,n){if(!n)throw new Error("Oxe - unbind requires scope argument");if(!e)throw new Error("Oxe - unbind requires element argument");if(!t)throw new Error("Oxe - unbind requires container argument");this.eachElement(e,function(e){this.eachAttribute(e,function(r){var a=this.get({scope:n,element:e,container:t,name:r.name,value:r.value});this.remove(a),Unrender.default(a)})})}},{key:"bind",value:function(e,t,n){if(!n)throw new Error("Oxe - bind requires scope argument");if(!e)throw new Error("Oxe - bind requires element argument");if(!t)throw new Error("Oxe - bind requires container argument");this.eachElement(e,function(e){this.eachAttribute(e,function(r){var a=this.create({scope:n,element:e,container:t,name:r.name,value:r.value}),l=this.add(a);!1!==l&&b.default(a)})})}}]),e}(),x=new k,E=function(){function e(){_classCallCheck(this,e),this.GET=2,this.SET=3,this.REMOVE=4,this.ran=!1,this.data=u.create({},this.listener.bind(this))}return _createClass(e,[{key:"traverse",value:function(e,t,n){var r;"string"==typeof t&&(t=t.split("."));for(var a=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in a)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&a.$set(t[s],isNaN(t[s+1])?{}:[])}a=a[t[s]]}return e===this.SET?r=a.$set(o,n):e===this.GET?r=a[o]:e===this.REMOVE&&(r=a[o],a.$remove(o)),r}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t,n){var r=void 0===e?y:b;if("length"===n){var a=t.split(".").slice(0,1).join("."),l=t.split(".").slice(1).join(".");if(!(a in x.data))return;if(!(l in x.data[a]))return;if(!(0 in x.data[a][l]))return;var i=x.data[a][l][0];r.default(i)}else x.each(t,function(e){r.default(e)})}}]),e}(),O=new E,T=function(){function e(){_classCallCheck(this,e),this.head=null,this.method="get",this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"}}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.head=e.head||this.head,this.method=e.method||this.method,this.path=e.path,this.origin=e.origin,this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.credentials=e.credentials,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:_async(function(e){var t="";for(var n in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t})},{key:"fetch",value:_async(function(e){var t=this,n=Object.assign({},e);if(n.path=n.path||t.path,n.origin=n.origin||t.origin,n.path&&"string"==typeof n.path&&"/"===n.path.charAt(0)&&(n.path=n.path.slice(1)),n.origin&&"string"==typeof n.origin&&"/"===n.origin.charAt(n.origin.length-1)&&(n.origin=n.origin.slice(0,-1)),n.path&&n.origin&&!n.url&&(n.url=n.origin+"/"+n.path),!n.url)throw new Error("Oxe.fetcher - requires url or origin and path option");if(!n.method)throw new Error("Oxe.fetcher - requires method option");if(!n.head&&t.head&&(n.head=t.head),"string"==typeof n.method&&(n.method=n.method.toUpperCase()||t.method),!n.acceptType&&t.acceptType&&(n.acceptType=t.acceptType),!n.contentType&&t.contentType&&(n.contentType=t.contentType),!n.responseType&&t.responseType&&(n.responseType=t.responseType),!n.credentials&&t.credentials&&(n.credentials=t.credentials),!n.mode&&t.mode&&(n.mode=t.mode),!n.cache&&t.cache&&(n.cahce=t.cache),!n.redirect&&t.redirect&&(n.redirect=t.redirect),!n.referrer&&t.referrer&&(n.referrer=t.referrer),!n.referrerPolicy&&t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),!n.signal&&t.signal&&(n.signal=t.signal),!n.integrity&&t.integrity&&(n.integrity=t.integrity),!n.keepAlive&&t.keepAlive&&(n.keepAlive=t.keepAlive),n.contentType)switch(n.head=n.head||{},n.contentType){case"js":n.head["Content-Type"]=t.mime.js;break;case"xml":n.head["Content-Type"]=t.mime.xml;break;case"html":n.head["Content-Type"]=t.mime.html;break;case"json":n.head["Content-Type"]=t.mime.json;break;default:n.head["Content-Type"]=n.contentType;}if(n.acceptType)switch(n.head=n.head||{},n.acceptType){case"js":n.head.Accept=t.mime.js;break;case"xml":n.head.Accept=t.mime.xml;break;case"html":n.head.Accept=t.mime.html;break;case"json":n.head.Accept=t.mime.json;break;default:n.head.Accept=n.acceptType;}return _invoke(function(){if(n.body)return _invokeIgnored(function(){if("GET"===n.method){var e=n.url+"?";return _await(t.serialize(n.body),function(t){n.url=e+t})}"json"===n.contentType&&(n.body=JSON.stringify(n.body))})},function(){var e=!1;return _invoke(function(){if("function"==typeof t.request){var r=Object.assign({},n);return _await(t.request(r),function(t){return!1===t?(e=!0,n):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(n,t))})}},function(r){if(e)return r;var a=Object.assign({},n);return a.head&&(a.headers=a.head,delete a.head),_await(window.fetch(n.url,a),function(e){return n.code=e.status,n.message=e.statusText,_invoke(function(){return n.responseType?_await(e["buffer"===n.responseType?"arrayBuffer":n.responseType](),function(e){n.body=e}):void(n.body=e.body)},function(){var e=!1;return _invoke(function(){if(t.response){var r=Object.assign({},n);return _await(t.response(r),function(t){return!1===t?(e=!0,n):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(n,t))})}},function(t){return e?t:n})})})})})})},{key:"post",value:_async(function(e){var t=this;return e.method="post",t.fetch(e)})},{key:"get",value:_async(function(e){var t=this;return e.method="get",t.fetch(e)})},{key:"put",value:_async(function(e){var t=this;return e.method="put",t.fetch(e)})},{key:"head",value:_async(function(e){var t=this;return e.method="head",t.fetch(e)})},{key:"patch",value:_async(function(e){var t=this;return e.method="patch",t.fetch(e)})},{key:"delete",value:_async(function(e){var t=this;return e.method="delete",t.fetch(e)})},{key:"options",value:_async(function(e){var t=this;return e.method="options",t.fetch(e)})},{key:"connect",value:_async(function(e){var t=this;return e.method="connect",t.fetch(e)})}]),e}(),w=new T,A={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var n=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("https://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var r=e.split("/"),a=0,i=r.length;a<i;a++)if("."===r[a]||""===r[a])continue;else".."===r[a]?0<a&&n.splice(a-1,1):n.push(r[a]);return"/"+n.join("/")}},S={innerHandler:function(e,t,n){return"\\"===n[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},updateString:function(e,t,n){return n.slice(0,t)+e+n.slice(t+1)},updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),n=e.indexOf("`",t+1);if(-1===t||-1===n)return e;for(var r,a=void 0,l=0,i=0,o=e,s=!1,d=0;d<o.length;d++)r=o[d],"`"===r&&"\\"!==o[d-1]?s?(l++,a="'",s=!1,o=this.updateString(a,d,o),d=this.updateIndex(a,d)):(i++,a="'",s=!0,o=this.updateString(a,d,o),d=this.updateIndex(a,d)):s&&(a=this.innerHandler(r,d,o))&&(o=this.updateString(a,d,o),d=this.updateIndex(a,d));if(o=o.replace(/\${(.*?)}/g,"'+$1+'"),i==l)return o;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,t){for(var n,r=[],a=e.match(this.patterns.imps)||[],o=0,i=a.length;o<i;o++)n=a[o].match(this.patterns.imp),r[o]={raw:n[0],name:n[1],url:A.resolve(n[2],t),extension:A.extension(n[2])},r[o].extension||(r[o].url+=".js");return r},getExports:function(e){for(var t,n=[],r=e.match(this.patterns.exps)||[],a=0,i=r.length;a<i;a++)t=r[a],n[a]={raw:t,default:-1!==t.indexOf("default")};return n},replaceImports:function(e,t){if(!t.length)return e;for(var n=0,r=t.length;n<r;n++){var a=t[n],l=(a.name?"var "+a.name+" = ":"")+"$LOADER.data['"+a.url+"'].result";e=e.replace(a.raw,l)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n";for(var n=0,r=t.length;n<r;n++)e=e.replace(t[n].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},C=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],n=Array.prototype.slice.call(arguments,1),r=0,a=t.length;r<a;r++)t[r].apply(this,n)}}]),e}(),j=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),n=new Function("$LOADER","window",t);e.result=n(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200<=n.status&&300>n.status||304==n.status)e.text=n.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(n.responseText)},n.open("GET",e.url),n.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=S.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=S.ast(e)),e.ast&&e.ast.imports.length)for(var n=0,r=e.ast.imports.length,a=function(){n++,n===r&&t()},l=0;l<r;l++)this.load({listener:a,method:e.method,url:e.ast.imports[l].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var n in e.attributes["o-load"]="true",e.attributes)t.setAttribute(n,e.attributes[n]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,t){if("string"==typeof e?e={url:e}:t=e.listener,e.url=A.resolve(e.url),e.url in this.data){var n=this.data[e.url];return void(n.listener.length?t&&n.listener.push(t):(t&&n.listener.push(t),this.ready(n)))}this.data[e.url]=e,e.extension=e.extension||A.extension(e.url),e.listener=t?[t]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}}]),t}(C),$=new j,P=function(){function e(){_classCallCheck(this,e),this.data={},this.compiled=!1}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components&&e.components.length)for(var t=0,n=e.components.length;t<n;t++)this.define(e.components[t])}},{key:"renderSlot",value:function(e,t){for(var n=e.querySelectorAll("slot[name]"),r=0,a=n.length;r<a;r++){var l=n[r],i=l.getAttribute("name"),o=t.querySelector("[slot=\""+i+"\"]");o?l.parentNode.replaceChild(o,l):l.parentNode.removeChild(l)}var s=e.querySelector("slot:not([name])");if(s){if(t.children.length)for(s.parentNode.setAttribute("slot","default");t.firstChild;)s.parentNode.insertBefore(t.firstChild,s);s.parentNode.removeChild(s)}}},{key:"renderStyle",value:function(e,t){if(!e)return"";if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)"))for(var n=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),r=0,a=n.length;r<a;r++){var l=n[r],i=l.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),o=new RegExp("var\\("+i[1]+"\\)","g");e=e.replace(i[0],""),e=e.replace(o,i[2])}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}return"<style>"+e+"</style>"}},{key:"created",value:function(e,t){var n=this,r=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{value:r,enumerable:!0}}),e.setAttribute("o-scope",r),O.set(r,t.model),v.set(r,t.methods),n.compiled&&"O-ROUTER"===e.parentElement.nodeName)x.bind(e,e,r);else{var a=document.createElement("template"),l=n.renderStyle(t.style,r);"string"==typeof t.template?a.innerHTML=l+t.template:(a.innerHTML=l,a.appendChild(t.template));var i=document.importNode(a.content,!0);x.bind(i,e,r),t.shadow?"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(i):"createShadowRoot"in document.body&&e.createShadowRoot().appendChild(i):(n.renderSlot(i,e),e.appendChild(i))}t.created&&t.created.call(e)}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.style=e.style||"",e.model=e.model||{},e.methods=e.methods||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.model={enumerable:!0,configurable:!0,get:function(){return O.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},O.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return v.get(this.scope)}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),q=new P,N=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=[],e.location={},e.ran=!1,e.mode="push",e.element=null,e.contain=!1,e}return _inherits(t,e),_createClass(t,[{key:"setup",value:_async(function(e){var t=this;return e=e||{},t.mode=void 0===e.mode?t.mode:e.mode,t.after=void 0===e.after?t.after:e.after,t.before=void 0===e.before?t.before:e.before,t.element=void 0===e.element?t.element:e.element,t.contain=void 0===e.contain?t.contain:e.contain,t.external=void 0===e.external?t.external:e.external,e.routes&&t.add(e.routes),_awaitIgnored(t.route(window.location.href,{mode:"replace"}))})},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else if(e.constructor===Object){if(!e.path)throw new Error("Oxe.router.add - route path required");if(!e.component)throw new Error("Oxe.router.add - route component required");this.data.push(e)}else if(e.constructor===Array)for(var t=0,n=e.length;t<n;t++)this.add(e[t])}},{key:"remove",value:function(e){for(var t=0,n=this.data.length;t<n;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,n=0,r=this.data.length;n<r;n++)if(t=this.data[n],e===t.path)return t}},{key:"find",value:function(e){for(var t,n=0,r=this.data.length;n<r;n++)if(t=this.data[n],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,n=[],r=0,a=this.data.length;r<a;r++)t=this.data[r],this.isPath(t.path,e)&&n.push(t);return n}},{key:"isPath",value:function(e,t){return("/"!==e.slice(0,1)&&(e=A.resolve(e)),!!t)&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var n={};if(!e||!t||"/"===e||"/"===t)return n;for(var r=/{|}/g,a=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(a.test(s[d])){var l=s[d].replace(r,"");n[l]=o[d]}return n}},{key:"toQueryString",value:function(e){var t="?";for(var n in e){var r=e[n];t+=n+"="+r+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var n,r=e.split("&"),a=0,i=r.length;a<i;a++)n=r[a].split("="),n[0]&&n[1]&&(t[n[0]]=n[1]);return t}},{key:"toLocationObject",value:function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host,port:t.port,hash:t.hash,search:t.search,protocol:t.protocol,hostname:t.hostname,pathname:t.pathname}}},{key:"render",value:function(e){var t=this;if(!e)throw new Error("Oxe.render - route argument required");g.ready(function(){if(e.title&&(document.title=e.title),e.description&&g.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&g.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!t.element&&(t.element=t.element||"o-router","string"==typeof t.element&&(t.element=document.body.querySelector(t.element)),!t.element))throw new Error("Oxe.router.render - missing o-router element");if(!e.element)if(e.load&&$.load(e.load),!e.component)throw new Error("Oxe.router.render - missing route component");else e.component.constructor===String?e.element=document.createElement(e.component):e.component.constructor===Object&&(q.define(e.component),e.element="compiled"===t.mode?t.element.firstChild:document.createElement(e.component.name));for(;t.element.firstChild;)t.element.removeChild(t.element.firstChild);t.element.appendChild(e.element),t.scroll(0,0),t.emit("routed"),"function"==typeof t.after&&Promise.resolve(t.after).catch(console.error)})}},{key:"route",value:_async(function(e,t){var n=this,r=!1;t=t||{};var a=t.mode||n.mode,l=n.toLocationObject(e),i=n.find(l.pathname);if(!i)throw new Error("Oxe.router.route - route not found");return l.route=i,l.title=l.route.title,l.query=n.toQueryObject(l.search),l.parameters=n.toParameterObject(l.route.path,l.pathname),t.query&&(e+=n.toQueryString(t.query)),_invoke(function(){if("function"==typeof n.before)return _await(n.before(l),function(e){!1===e&&(r=!0)})},function(t){var i=!1;return r?t:_invoke(function(){if(l.route&&l.route.handler)return i=!0,_await(l.route.handler(l))},function(t){return i?t:l.route&&l.route.redirect?n.redirect(l.route.redirect):"href"===a||"compiled"===a?window.location.assign(e):void(window.history[a+"State"]({path:e},"",e),n.location=l,n.emit("routing"),n.render(l.route))})})})}]),t}(C),L=new N,R=function(){function e(){_classCallCheck(this,e),this.compiled=!1}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&A.base(e.base)}}]),e}(),I=new R,_=document.createElement("style"),V=document.createTextNode("\n\to-router, o-router > :first-child {\n\t\tdisplay: block;\n\t\tanimation: o-transition 150ms ease-in-out;\n\t}\n\t@keyframes o-transition {\n\t\t0% { opacity: 0; }\n\t\t100% { opacity: 1; }\n\t}\n");_.setAttribute("type","text/css"),_.appendChild(V),document.head.appendChild(_);var B=document.querySelector("script[o-setup]");if(B){var D=0,M=0,U=function(){if(D==M){var e=B.getAttribute("o-setup").split(/\s*,\s*/),t=document.querySelector("meta[name=\"oxe\"]");if(t&&t.hasAttribute("compiled")&&(e[1]="null",e[2]="script",L.mode="compiled",I.compiled=!0,q.compiled=!0),!e[0])throw new Error("Oxe - o-setup attribute requires a url");if(1<e.length)$.load({url:e[0],method:e[2],transformer:e[1]});else{var n=document.createElement("script");n.setAttribute("src",e[0]),n.setAttribute("async","true"),n.setAttribute("type","module"),document.head.appendChild(n)}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})}},F=function(e,t){var n=document.createElement("script");n.setAttribute("async","true"),n.setAttribute("src",e),n.addEventListener("load",function(){D++,t()},!0),document.head.appendChild(n)},G=[],H=!("fetch"in window),X=!("assign"in Object),z=!("Promise"in window),K=!("registerElement"in document)||!("content"in document.createElement("template"));H&&G.push("fetch"),z&&G.push("Promise"),X&&G.push("Object.assign"),(z||H||X)&&(M++,F("https://cdn.polyfill.io/v2/polyfill.min.js?features="+G.join(","),U)),K&&(M++,F("https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js",U)),U()}else document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)});var Q=function(){function e(){_classCallCheck(this,e),this.g={}}return _createClass(e,[{key:"setup",value:_async(function(e){var t=this;if(!t._setup)return t._setup=!0,e=e||{},e.listener=e.listener||{},document.addEventListener("load",s,!0),document.addEventListener("input",l,!0),document.addEventListener("click",i,!0),document.addEventListener("change",a,!0),window.addEventListener("popstate",o,!0),document.addEventListener("reset",function(t){if(t.target.hasAttribute("o-reset")){t.preventDefault();var n,r;e.listener.reset&&(n="function"==typeof e.listener.reset.before?e.listener.reset.before.bind(null,t):null,r="function"==typeof e.listener.reset.after?e.listener.reset.after.bind(null,t):null),Promise.resolve().then(n).then(d.bind(null,t)).then(r).catch(console.error)}},!0),document.addEventListener("submit",function(t){if(t.target.hasAttribute("o-submit")){t.preventDefault();var n,r;e.listener.submit&&(n="function"==typeof e.listener.submit.before?e.listener.submit.before.bind(null,t):null,r="function"==typeof e.listener.submit.after?e.listener.submit.after.bind(null,t):null),Promise.resolve().then(n).then(c.bind(null,t)).then(r).catch(console.error)}},!0),_invoke(function(){if(e.listener.before)return _awaitIgnored(e.listener.before())},function(){return e.general&&t.general.setup(e.general),e.fetcher&&t.fetcher.setup(e.fetcher),e.loader&&t.loader.setup(e.loader),e.component&&t.component.setup(e.component),_invoke(function(){if(e.router)return _awaitIgnored(t.router.setup(e.router))},function(){return _invokeIgnored(function(){if(e.listener.after)return _awaitIgnored(e.listener.after())})})})})},{key:"global",get:function(){return this.g}},{key:"window",get:function(){return window}},{key:"document",get:function(){return window.document}},{key:"body",get:function(){return window.document.body}},{key:"head",get:function(){return window.document.head}},{key:"location",get:function(){return this.router.location}},{key:"currentScript",get:function(){return window.document._currentScript||window.document.currentScript}},{key:"ownerDocument",get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},{key:"render",get:function(){return b}},{key:"methods",get:function(){return v}},{key:"utility",get:function(){return g}},{key:"general",get:function(){return I}},{key:"batcher",get:function(){return h}},{key:"loader",get:function(){return $}},{key:"binder",get:function(){return x}},{key:"fetcher",get:function(){return w}},{key:"component",get:function(){return q}},{key:"router",get:function(){return L}},{key:"model",get:function(){return O}}]),e}(),J=new Q;return J});