!function(){"use strict";function b(a){var b="",c=null;for(c in a)b=0<b.length?b+"&":b,b=b+encodeURIComponent(c)+"="+encodeURIComponent(a[c]);return b}function d(b){for(var f=b.getElementsByTagName("*"),g={},h=0,j=f.length;h<j;h++){var i=f[h],a=i.name,k=i.type,n=i.value,c=i.checked,o=i.disabled,p=i.tagName.toLowerCase();if(("input"===p||"textarea"===p||"select"===p)&&a&&!o&&"submit"!==k&&"reset"!==k&&"button"!==k&&"file"!==k)if("checkbox"===k)g[a]=c;else if("radio"===k)c&&(g[a]=n);else if("select-one"===k||"select-multiple"===k){g[a]=[];for(var l=0,q=i.selectedOptions.length;l<q;l++)g[a].push(i.selectedOptions[l].value);g[a]=g[a].join(", ")}else g[a]=n}return g}function f(a,b){var c="string"==typeof a?document.querySelector(a):a,d=document.createElement("div");d.classList.add("spinner"),c.appendChild(d),c.addEventListener("submit",function(a){a.preventDefault(),b(c,c.querySelector("[type=submit]"),d)})}function g(a){if(!a)throw new Error("Astatine.ajax: requires options");if(!a.action)throw new Error("Astatine.ajax: requires options.action");if(!a.method)throw new Error("Astatine.ajax: requires options.method");if(!a.success)throw new Error("Astatine.ajax: requires options.success");if(!a.error)throw new Error("Astatine.ajax: requires options.error");if(a.headers||(a.headers={}),a.data)if("GET"===a.method)a.action=a.action+"?"+b(a.data),a.data=null;else{switch(a.requestType){case"script":a.contentType=i.script;break;case"json":a.contentType=i.json;break;case"xml":a.contentType=i.xml;break;case"html":a.contentType=i.html;break;case"text":a.contentType=i.text;break;default:a.contentType=i.urlencoded;}switch(a.responseType){case"script":a.accept=i.script;break;case"json":a.accept=i.json;break;case"xml":a.accept=i.xml;break;case"html":a.accept=i.html;break;case"text":a.accept=i.text;}a.contentType===i.json&&(a.data=JSON.stringify(a.data)),a.contentType===i.urlencoded&&(a.data=b(a.data))}var c=new XMLHttpRequest;if(c.open(a.method.toUpperCase(),a.action,!0,a.username,a.password),a.mimeType&&c.overrideMimeType(a.mimeType),a.withCredentials&&(c.withCredentials=a.withCredentials),a.accept&&(a.headers.Accept=a.accept),a.contentType&&(a.headers["Content-Type"]=a.contentType),a.headers)for(var d in a.headers)c.setRequestHeader(d,a.headers[d]);c.onreadystatechange=function(){if(4===c.readyState)return 200<=c.status&&400>c.status?a.success(c):a.error(c)},c.send(a.data)}function h(a){return"\n\t.spinner {\n\t\tmargin: auto;\n\t\tdisplay: none;\n\t\twidth: "+a.thickness+";\n\t\theight: "+a.thickness+";\n\t\tborder: solid "+a.size+" "+a.colorBottom+";\n\t\tborder-top: solid "+a.size+" "+a.colorTop+";\n\t\tborder-radius: 50%;\n\t\tanimation: spin 2s linear infinite;\n\t\t-o-animation: spin 2s linear infinite;\n\t\t-ms-animation: spin 2s linear infinite;\n\t\t-moz-animation: spin 2s linear infinite;\n\t\t-webkit-animation: spin 2s linear infinite;\n\t}\n\t@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n\t@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }\n\t@-ms-keyframes spin { 0% { -ms-transform: rotate(0deg); } 100% { -ms-transform: rotate(360deg); } }\n\t@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }\n\t@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }\n\t"}function a(a){var b=document.head,c=b.querySelector("[title=Astatine]"),d=h(a),e=document.createElement("style"),f=document.createTextNode(d);e.setAttribute("title","Astatine"),e.appendChild(f),c?b.replaceChild(e,c):document.head.appendChild(e)}var i={script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",urlencoded:"application/x-www-form-urlencoded"},j={setup:{spinner:{s:"3px",t:"15px",ct:"darkgray",cb:"lightgray"}},ajax:g,submit:function(b){if(!b)throw new Error("Astatine.submit: requires options");if(!b.query)throw new Error("Astatine.submit: requires options.query");if(!b.complete)throw new Error("Astatine.submit: requires options.complete");null!==b.reset&&void 0!==b.reset||(b.reset=!0),f(b.query,function(f,h,i){if(i&&(i.style.display="block"),h&&(h.style.display="none"),b.data=b.data||d(f),b.action=b.action||f.getAttribute("action"),b.method=b.method||f.getAttribute("method"),b.success=function(a){i&&(i.style.display="none"),h&&(h.style.display="block"),b.reset&&f.reset(),b.complete(null,a,b.data)},b.error=function(a){i&&(i.style.display="none"),h&&(h.style.display="block"),b.complete(a,null,b.data)},b.prepare){var a=function(a){b.data=a,g(b)},e=function(a){i&&(i.style.display="none"),h&&(h.style.display="block"),b.error(a)};b.prepare=b.prepare.bind(b,b.data,a,e);var j=b.prepare();j&&(b.data=j,g(b))}})},formData:d,serialize:b};Object.defineProperties(j.setup.spinner,{size:{get:function(){return this.s},set:function(b){this.s=b,a(this)}},thickness:{get:function(){return this.t},set:function(b){this.t=b,a(this)}},colorTop:{get:function(){return this.ct},set:function(b){this.ct=b,a(this)}},colorBottom:{get:function(){return this.cb},set:function(b){this.cb=b,a(this)}}}),window.At=j,window.Astatine=j,document.addEventListener("DOMContentLoaded",function(){a(window.Astatine.setup.spinner)})}();